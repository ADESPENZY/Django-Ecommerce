{% extends 'base.html' %}

{% block title %} My Cart {% endblock  %}


{% block main %}
    <h2 class="text-2xl font-bold mb-4">My Cart</h2>
    {% if cart %}
        <ul class="space-y-4">
            
            {% for item in cart.items.all %}
                <li class="flex items-center p-4">
                    {% if item.product.image %}
                    <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}"  class="w-24 h-24 object-cover rounded-md shadow-md mr-4">
                    {% endif %}
                    <div class="flex-grow">
                        <a href="{% url 'product_detail' item.product.id item.product.slug %}">
                            <h3 class="font-semibold text-lg">{{ item.product.name }}</h3>
                        </a>
                        <p class="text-gray-700">{{item.product.description}}</p>
                        <p class="text-indigo-600">${{item.product.price}}</p>
                        <p class="text-gray-600">Quantity: {{item.quantity}}</p>

                        <div class="flex-shrink">
                            <form action="{% url 'cart:remove' item.id %}" method="post">
                                {% csrf_token %}
                                <button type="submit" class="bg-red-600 text-white px-4 py-1 text-sm rounded"> X </button>
                                <p id="message"></p>
                            </form>
                        </div>
                        
                    </div>
                </li>
            {% endfor %}
                
        </ul>
        <p class="font-bold text-xl">Total Price: ${{cart.get_total_price}}</p>
        {% else %}
        <p>Your Cart Is Empty</p>
    {% endif %}
        <form action="{% url 'orders:order_create' %}" method="post">
            {% csrf_token %}
            <button type="submit" class="bg-indigo-600 text-white px-4 py-2 rounded mt-5">Proceed To CheckOut</button>
        </form>
{% endblock  %}
    